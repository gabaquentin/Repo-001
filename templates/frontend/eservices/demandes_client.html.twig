{% extends "/frontend/eservices/base.html.twig" %}
{#TODO commencer la gestion des demandes du client #}
{% block title %}Mes Demandes{% endblock %}

{% block body %}
    <!-- Main wrapper -->
    <div class="shop-wrapper">

        <!-- Search overlay -->
        <div class="search-overlay"></div>

        <!-- Search input -->
        <div class="search-input-wrapper is-desktop is-hidden">
            <div class="field">
                <div class="control">
                    <div class="easy-autocomplete" style="width: 0px;"><input id="nephos-search" type="text"
                                                                              name="search"
                                                                              placeholder="Search a Product"
                                                                              autocomplete="off">
                        <div class="easy-autocomplete-container" id="eac-container-nephos-search">
                            <ul></ul>
                        </div>
                    </div>
                    <span id="clear-search" role="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                               viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                               stroke-width="2" stroke-linecap="round"
                                                               stroke-linejoin="round" class="feather feather-x"><line
                                    x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18"
                                                                               y2="18"></line></svg></span>
                    <span class="bar"></span>
                </div>
                <span class="search-help">Type the name of the product you are looking for</span>
            </div>
        </div>
        <!-- Main section -->
        <div id="shop-grid" class="section">
            <!-- Container -->
            <div class="container">

                <!-- House products -->
                <div class="columns category-header">
                    <div class="column main-column is-tablet-landscape-padded">
                        <!-- Title -->
                        <div class="category-title is-product-category">
                            <h2>DEMANDES</h2>
                            <div class="category-icon edit-account is-hidden-mobile">
                                <a href="{{ path('services_accueil',{"scroll_bool":1}) }}"
                                   class="modal-trigger has-simple-popover"
                                   data-modal="new-wishlist" data-content="Add a New Wishlist" data-placement="top">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="feather feather-plus feather-icons">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="listing-controls">
                            <div class="layout-controls">
                                <div class="control has-addon has-icon">
                                    <input id="demande_recherche" class="input is-default is-rounded" type="text"
                                           placeholder="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="feather feather-search">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                    </svg>
                                </div>
                            </div>
                            <!-- Sort -->
                            <div class="sort-box">
                                <div class="sort-box-select">
                                    <select data-placeholder="Default order" class="chosen-select-no-single"
                                            style="display: none;">
                                        <option>La Totalité</option>
                                        <option>Ménage</option>
                                        <option>Jardinage</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- /Controls -->


                        <!-- Product grid -->
                        <div class="columns is-account-grid is-multiline">
                            <div class="account-loader is-active">
                                <div class="loader is-loading"></div>
                            </div>
                            {% for demande in demandes %}
                                <!-- Product -->
                                <div class="column is-6">
                                    <div class="flat-card product-container is-long" data-product-id="7"
                                         data-product-category="House">
                                        <div class="left-image is-md">
                                            <img src="{{ asset('images/services/'~demande.service.img) }}"
                                                 data-demo-src="assets/img/products/house1.png" alt="">

                                        </div>
                                        <div class="product-info">
                                            <a class="product-details-link"
                                               href="{{ path('demande_details',{'demande_id':demande.id}) }}"><h3
                                                        class="product-name featured-md">{{ demande.service.nom }}</h3>
                                            </a>
                                            <p class="product-description">{{ demande.description }}</p>
                                            <p class="product-description">non répondu</p>
                                            <p class="product-price">
                                                <span>{{ demande.date }} </span>
                                                <span>{{ demande.heure.format('h:m') }} </span>
                                            </p>
                                        </div>

                                        <div class="actions">
                                            <div class="demande_id is-hidden" data-id="{{ demande.id }}"></div>
                                            <div class="service_id is-hidden" data-id="{{ demande.service.id }}"></div>
                                            <div class="categorie_img is-hidden"
                                                 data-img="{{ demande.service.categorieService.img }}"></div>
                                            <div class="add modal-trigger"
                                                 data-modal="add-to-wishlist-modal">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                     viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                     stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                     class="feather feather-settings feather-icons">
                                                    <circle cx="12" cy="12" r="3"></circle>
                                                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                                </svg>
                                            </div>
                                            <div class="demande_delete">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                     viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                     stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                     class="feather feather-trash-2">
                                                    <polyline points="3 6 5 6 21 6"></polyline>
                                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                            <!-- Product -->
                        </div>
                        <!-- /Product grid -->
                        <!-- Add Wishlist Modal -->
                        <div id="add-to-wishlist-modal" class="modal add-to-wishlist-modal ">
                            <div class="modal-background"></div>
                            <div class="modal-content">
                                <div class="box">
                                    <div class="box-header">
                                        <img src="{{ asset('frontend/img/logo/nephos-greyscale.svg') }}" alt="">
                                        <span>MODIFIER</span>
                                        <div class="modal-delete"><i data-feather="x"></i></div>
                                    </div>
                                    <div class="box-body">
                                        <div class="tabs-wrapper underline-tabs animated-tabs">
                                            <div class="tabs">
                                                <ul>
                                                    <li class="is-active" data-tab="t4"><a>Réponse 1</a></li>
                                                    <li data-tab="t5" class=""><a>Réponse 2</a></li>
                                                    <li data-tab="t6" class=""><a>Réponse 3</a></li>
                                                    <li data-tab="t7" class=""><a>Réponse 4</a></li>
                                                </ul>
                                            </div>
                                            <div id="t4" class="navtab-content is-active">
                                                <div class="inner-content">
                                                    <div id="existing-product-message"
                                                         class="message is-link has-close-icon is-hidden">
                                                        <div class="message-body">
                                                            <a class="close-icon">
                                                                <i data-feather="x"></i>
                                                            </a>
                                                            This product already exists in the selected wishlist. Please
                                                            try another one.
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list-placeholder"
                                                         class="modal-placeholder is-hidden">
                                                        <div class="placeholder-content">
                                                            <img src="assets/img/illustrations/bed.svg" alt="">
                                                            <h3>No Wishlists</h3>
                                                            <p>You currently don't have any wishlist saved. Start by
                                                                creating one.</p>
                                                            <div class="button-wrap">
                                                                <a href="wishlist.html"
                                                                   class="button big-button primary-button rounded raised modal-delete">Add
                                                                    Wishlist</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list" class="wishlist-modal-list">
                                                        <p>Add a new sub list to classify your wishlist items. You can
                                                            then manage them and find them
                                                            more
                                                            easily.</p>
                                                        <ul>
                                                            <li class="list-item is-active">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                            <li class="list-item">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <div class="button-wrap">
                                                            <button type="submit"
                                                                    class="button add-to-wishlist-action is-fullwidth feather-button is-bold primary-button raised">
                                                                Add To Wishlist
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="t5" class="navtab-content">
                                                <div class="inner-content">
                                                    <div id="existing-product-message"
                                                         class="message is-link has-close-icon is-hidden">
                                                        <div class="message-body">
                                                            <a class="close-icon">
                                                                <i data-feather="x"></i>
                                                            </a>
                                                            This product already exists in the selected wishlist. Please
                                                            try another one.
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list-placeholder"
                                                         class="modal-placeholder is-hidden">
                                                        <div class="placeholder-content">
                                                            <img src="assets/img/illustrations/bed.svg" alt="">
                                                            <h3>No Wishlists</h3>
                                                            <p>You currently don't have any wishlist saved. Start by
                                                                creating one.</p>
                                                            <div class="button-wrap">
                                                                <a href="wishlist.html"
                                                                   class="button big-button primary-button rounded raised modal-delete">Add
                                                                    Wishlist</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list" class="wishlist-modal-list">
                                                        <p>Add a new sub list to classify your wishlist items. You can
                                                            then manage them and find them
                                                            more
                                                            easily.</p>
                                                        <ul>
                                                            <li class="list-item is-active">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                            <li class="list-item">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <div class="button-wrap">
                                                            <button type="submit"
                                                                    class="button add-to-wishlist-action is-fullwidth feather-button is-bold primary-button raised">
                                                                Add To Wishlist
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="t6" class="navtab-content">
                                                <div class="inner-content">
                                                    <div id="existing-product-message"
                                                         class="message is-link has-close-icon is-hidden">
                                                        <div class="message-body">
                                                            <a class="close-icon">
                                                                <i data-feather="x"></i>
                                                            </a>
                                                            This product already exists in the selected wishlist. Please
                                                            try another one.
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list-placeholder"
                                                         class="modal-placeholder is-hidden">
                                                        <div class="placeholder-content">
                                                            <img src="assets/img/illustrations/bed.svg" alt="">
                                                            <h3>No Wishlists</h3>
                                                            <p>You currently don't have any wishlist saved. Start by
                                                                creating one.</p>
                                                            <div class="button-wrap">
                                                                <a href="wishlist.html"
                                                                   class="button big-button primary-button rounded raised modal-delete">Add
                                                                    Wishlist</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="wishlist-modal-list" class="wishlist-modal-list">
                                                        <p>Add a new sub list to classify your wishlist items. You can
                                                            then manage them and find them
                                                            more
                                                            easily.</p>
                                                        <ul>
                                                            <li class="list-item is-active">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                            <li class="list-item">
                                                                <div class="meta">
                                                                    <span class="name">Title</span>
                                                                    <span class="count"><var>0</var> Items</span>
                                                                </div>
                                                                <div class="selected-indicator">
                                                                    <i data-feather="check"></i>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <div class="button-wrap">
                                                            <button type="submit"
                                                                    class="button add-to-wishlist-action is-fullwidth feather-button is-bold primary-button raised">
                                                                Add To Wishlist
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="t7" class="navtab-content">
                                                <div class="inner-content">
                                                    <p>Add a new sub list to classify your wishlist items. You can then
                                                        manage them and find them more easily.</p>
                                                    <div class="control">
                                                        <input id="new-wishlist-input" type="text"
                                                               class="input is-minimal" placeholder="Wishlist name">
                                                    </div>
                                                    <div class="button-wrap">
                                                        <button type="submit"
                                                                class="button add-wishlist-action is-fullwidth feather-button is-bold primary-button raised">
                                                            Create
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="inner-content " id="demande_update">
                                            <img src="" alt="">

                                            <form action="" id="modification">
                                                <p>Veuillez modifiez les champs que vous souhaitez.</p>
                                                <div class="control required" style="margin-top:10px">
                                                    <input type="textarea" id="description" name="description"
                                                           class="input"
                                                           placeholder="Description">
                                                </div>
                                                <div class="control required" style="margin-top:10px">
                                                    <input type="text" id="localisation" name="localisation"
                                                           class="input"
                                                           placeholder="Code Postal">
                                                </div>
                                                <div class="control required" style="margin-top:10px">
                                                    <input type="text" id="date" name="date" class="input"
                                                           placeholder="date"
                                                           data-toggle="datepicker">
                                                </div>
                                                <div class="control required" style="margin-top:10px">
                                                    <input type="time" id="heure" name="heure" class="input"
                                                           placeholder="heure">
                                                </div>
                                                <div class="button-wrap">
                                                    <button type="submit" id="modifier"
                                                            class="button add-wishlist-action is-fullwidth feather-button is-bold primary-button raised">
                                                        modifier
                                                    </button>
                                                </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> {#                        <div class="show-more"><a href="#">Plus de demandes </a></div>#}

                    </div>
                </div>
                <!-- /House products -->

                <!-- /Accessories products -->
            </div>
            <!-- /Container -->
        </div>
        <!-- /Main section -->
    </div>
    <!-- /Main wrapper -->

    <!-- Add to Wishlist Modal -->

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.js"></script>
    <script src="{{ asset('frontend/js/pages/eservices/demande_client.js') }}"></script>
    <script src="{{ asset('frontend/js/elements.js') }}" type="text/javascript"></script>
    <script>
        $('[data-toggle="datepicker"]').datepicker();
    </script>
{% endblock %}