{% extends "backend/base/base.html.twig" %}

{% block title %}{{ (form.vars.value.id is null)?"Nouvelle":"Modifier" }} catégorie{% endblock %}

{% block stylesheets %}
    <!-- Plugins css-->
    <link href="{{ asset('backend/libs/dropzone/dropzone.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('backend/libs/switchery/switchery.min.css') }}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block block_starter %}Gestion des services {% endblock %}

{% block body %}
    <h4 class="header-title mb-3">{{ (form.vars.value.id is null)?"Ajouter une nouvelle":"Modifier une" }} catégorie</h4>

    {{ form_start(form,{'attr':{'novalidate':'novalidate','id':'form-categorie','data-plugin':'dropzone','data-previews-container':'#file-previews','data-upload-preview-template':'#uploadPreviewTemplate','enctype':'multipart/form-data'}}) }}
        <div class="form-group row">
            <label class="col-sm-2 col-form-label" for="userName1">Nom de la catégorie</label>
            <div class="col-md-9">
                {{ form_widget(form.nom, {'attr': {'class':'form-control col-sm-6', 'id':'nom'}}) }}
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label" for="userName1">Sous-catégorie</label>
            {{ form_widget(form.typeCategorie, {'attr' : {'id':'typeCat', 'data-plugin':'switchery','data-color':'#1AB394', 'data-secondary-color':'#ED5565'}}) }}
            <div id="catParent" class="row col-md-9">
                <label class="col-sm-2 col-form-label" for="userName1">Catégorie parent</label>
                <div class="col-md-auto">
                    {{ form_widget(form.categorieParent, {'attr' : {'class':'form-control col-auto', 'id':'categorieParent'}}) }}
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label" for="example-textarea">Description</label>
            <div class="col-sm-10">
                {{ form_widget(form.description, {'attr': {'class':'form-control','rows':'5', 'id':'description'}}) }}
            </div>
        </div>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label" for="imgfile">Image </label>
        <div class="fileupload btn btn-secondary waves-effect mt-1">
                <span>
                    <i class="mdi mdi-cloud-upload mr-1"></i>
                    choisir une image
                </span>
            <input type="file" name="imgfile" id="imgfile">
        </div>

    </div>
        <br>
        <button type="submit" id="valider" class="btn btn-info waves-effect waves-light">Valider</button>
    {{ form_end(form) }}
    <button id="valc">valc</button>
{% endblock %}
    {% block javascripts %}
        {{ parent() }}
        <!-- Plugins js-->
        <script src="{{ asset('backend/libs/dropzone/dropzone.min.js') }}"></script>
        <script src="{{ asset('backend/libs/switchery/switchery.min.js') }}"></script>

        <!-- Init js-->
        <script src="{{ asset('backend/js/pages/form-fileuploads.init.js') }}"></script>
        <script src="{{ asset('backend/js/pages/form-advanced.init.js') }}"></script>

        <!-- custom js-->
        <script src="{{ asset('backend/js/pages/eservices/categorie.js') }}"></script>
        <script>
            $('#categorie_service_typeCategorie').click(function (){
                console.log("hiiiiiii")
                if($('#typeCat').is(':checked')){
                    console.log("hiiiiiii")
                    $('#catParent').hide();
                }else
                    $('#catParent').show();
            })
            $('#valc').click(function (){
                $('#catParent').toggle();
            })
        </script>
    {% endblock %}